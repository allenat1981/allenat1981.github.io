---
title: "使用 mkcert 建立測試憑證"
date: 2026-01-28 11:40:00 +0800
categories: 
  - Linux
tags:
  - Linux
  - SSL/TLS
---

在需要使用到自簽憑證的場景中，除了使用 `openssl` 產生自訂憑證外，使用 mkcert 可以快速的產生憑證並整合到 FireFox/Google Chrome 瀏覽器。

## 安裝 mkcert

```bash
# 安裝 mkcert
sudo apt install mkcert

# 安裝 libnss3-tools (用來將 mkcert 根憑證加入瀏覽器)
sudo apt install libnss3-tools
```

接著讓 mkcert 產生一組根憑證(Root CA)，並加入到瀏覽器

```bash
mkcert -install
```

## 建立測試憑證

以下為常用的建立憑證方法

```bash
# 生成一個域名的憑證
mkcert mysite.localhost

# 生成支援 wildcard 的憑證
mkcert *.mysite.localhost

# 生成支援多域名的憑證
mkcert mysite.localhost mysite2.localhost 127.0.0.1

# 自訂輸出的憑證檔名與金鑰檔名
mkcert -cert-file [憑證檔名] -key-file [金鑰檔名] mysite.localhost ...

```

若要產生可支援多域名的憑證

```bash
mkcert mysite.localhost mysite2.localhost 127.0.0.1
```

### 補充說明

1. mkcert 僅為測試憑證，但仍要注意測試根憑證不應外流，否則仍會有被偽造的風險。
2. mkcert 建立的憑證效期是固定的，無法在建立時自行設定，因此若逾期則需要重新用 mkcert 產生新的憑證。
3. 基本上憑證可支援 Google Chrome/FireFox/Edge 等瀏覽器，但並非所有瀏覽器都可支援。

## 移除測試憑證

首先將 Root CA 從系統和瀏覽器的憑證信任區撤銷

```bash
mkcert -uninstall
```

{{< alert type="notice" >}}
`mkcert -uninstall` 僅是將憑證從信任區撤銷，若要完全移除 Root CA 檔案，則可將存放 Root CA 的目錄移除。
{{< /alert >}}

若要將存放 Root CA 檔案的目錄移除

```bash
mkcert -CAROOT
# 輸出 mkcert 存放 Root CA 的目錄移除
# 接著用 rm 將目錄內的憑證檔刪除即可
```
