---
title: "初探 Console 機制"
date: 2025-03-13 10:00:00 +0800
categories: 
  - laravel
tags:
  - laravel
---

本文件的範例來自 Udemy 課程

Master Laravel 11 & PHP: From Beginner to Advanced: \#5.78 ~ \#5.80

Laravel 提供 Console 機制，可以不用透過 Reqeust URL 的方式，進行一些 Laravel Application 可於主機端獨立運行的操作。

本文內容為建立 Custom Command，並結合 Scheduler 和 Notificatoin 機制，發送通知信給 User。本文內容包含：

1. 建立 Custom Command
2. 設定 Task Scheduling 機制
3. 設定 Notification 機制
4. 透過 Notification 發送電子郵件

## 建立 Custom Command

官方文件[Writing Commands](https://laravel.com/docs/11.x/artisan#writing-commands)。

使用 `make:command` 指令建立 Custom Command

```bash
php aritsan make:command SendEventReminders
```

建立完成後，編輯 `app/Console/Commands/SendEventReminders.php`

```php
class SendEventReminders extends Command
{
    /**
     * The name and signature of the console command.
     *
     * @var string
     */
    protected $signature = 'app:send-event-reminders';

    /**
     * The console command description.
     *
     * @var string
     */
    protected $description = 'Sends notifications to all event attendees that event starts soon.';

    /**
     * Execute the console command.
     */
    public function handle()
    {
    }
}
```

說明：

- `$signature` 為指令名稱。
- `$description` 為指令文字說明。
- `handle()` 為指令的腳本內容。

若要檢視與執行指令：

```bash
php artisan 
# 列出所有 artisan 指令與說明，在其中可以找到 $signature 和 $description 的指令名稱與說明。

php artisan app:send-event-reminders
# 執行 app:send-event-reminders 的 handle() 內的腳本。
```

## Task Scheduling 機制

官方文件[Task Scheduling](https://laravel.com/docs/11.x/scheduling)
